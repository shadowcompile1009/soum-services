import styled from 'styled-components';
import React from 'react';

import { Loader } from '@/components/Loader';
import { Text } from '@/components/Text';
import { Stack } from '@/components/Layouts';

export function ExportCSVIcon() {
  return (
    <svg
      version="1.0"
      xmlns="http://www.w3.org/2000/svg"
      width="32"
      height="32"
      viewBox="0 0 5120 5120"
      style={{ cursor: 'pointer' }}
    >
      <g fill="#6faa18">
        <path d="M2636 5068c-14-18-69-91-122-163-118-160-117-159-199-270-37-49-78-105-93-124-15-18-31-40-36-49-5-8-14-22-22-31-7-9-45-59-83-111-39-52-82-108-96-125-28-34-40-67-31-90 4-12 33-15 170-15 136 0 167-3 180-16 14-13 16-58 16-340v-326l30-29 29-30 325 3 324 3 26 28 26 28v322c0 185 4 328 10 337 7 12 43 16 182 20 167 5 173 6 176 26 2 15-103 164-349 495-193 261-357 477-363 481s-25 8-43 8c-25 0-38-8-57-32zM1062 4567l-22-23V3360l26-10c36-14 148-12 162 2 9 9 12 137 12 513s3 504 12 513 102 12 358 12c262 0 350 3 362 13 23 18 128 162 128 175 0 9-129 12-508 12h-509l-21-23z" />
        <path d="M3290 4579c0-11 77-116 118-161l26-28h353c339 0 353-1 363-20 7-13 9-550 8-1710-3-1490-5-1692-18-1700-9-6-156-10-348-10h-333l-24-25-25-24V566c0-321-1-336-19-346-30-16-2123-14-2139 2-9 9-12 180-12 710 0 679-1 698-19 708-27 14-154 13-169-2-9-9-12-199-12-794 0-755 1-783 19-805l19-24 1229-3c815-2 1240 1 1263 7 27 8 124 99 410 386l375 375v3762l-28 24-28 24h-505c-353 0-504-3-504-11z" />
        <path d="M802 3150c-12-5-27-21-32-35-6-16-10-255-10-621 0-629 1-641 45-658 21-8 2702-8 2731 0 12 3 29 20 38 37 16 29 17 88 14 634l-3 601-24 26-24 26-1356-1c-790 0-1365-4-1379-9zm2160-219c54-1 68-4 72-18 21-74 193-658 217-733 16-53 29-99 29-103s-58-7-129-7h-128l-54 210c-30 115-57 206-61 202s-25-81-48-172-45-182-51-202l-10-38h-134c-104 0-135 3-135 13 0 7 15 67 34 132 18 66 36 129 39 140s24 85 46 165c23 80 58 204 79 277l37 132 35 3c19 2 49 2 65 1 17-1 60-2 97-2zm-1299-29c26-11 47-25 47-29-1-6-26-128-29-140-1-2-1-13-1-25 0-44-11-48-70-28-97 34-178 24-232-27-36-35-51-84-51-165 1-76 28-136 75-171 38-28 129-34 188-12 25 9 52 19 61 22 14 4 21-12 39-94 13-54 23-104 24-111 1-8-21-23-49-35-41-17-71-21-170-22-115 0-123 1-187 32-184 87-270 284-227 518 26 144 131 262 266 301 74 21 255 13 316-14zm605 4c50-26 111-85 135-130 17-32 21-59 22-126 0-76-3-89-27-127-41-63-75-90-165-134-96-47-109-59-93-88 17-34 101-24 212 23 14 6 19-1 28-36 6-23 15-54 21-68 5-14 10-43 12-64 2-39 2-39-58-64-51-22-76-26-170-26-92-1-118 3-155 20-138 64-196 232-125 362 35 64 73 96 183 151 69 35 82 45 82 66 0 30-26 45-80 45-44 0-148-31-186-57-13-8-24-14-24-12s-7 42-15 89-15 95-15 107c0 29 34 51 118 74 86 24 249 22 300-5z" />
      </g>
    </svg>
  );
}

const ExportCSVContainer = styled(Stack)(() => ({}));

interface ExportCSVProps {
  children: React.ReactNode;
  handleDownload: () => void;
  isLoading: boolean;
}

export function ExportCSV(props: ExportCSVProps): React.ReactElement {
  const { children, isLoading } = props;
  return (
    <ExportCSVContainer align="center" direction="horizontal" gap="2">
      {isLoading && <Loader border="static.blue" />}
      <Text color="static.black" fontWeight="semibold" fontSize="baseText">
        {children}
      </Text>
      <span onClick={props.handleDownload}>
        <ExportCSVIcon />
      </span>
    </ExportCSVContainer>
  );
}
