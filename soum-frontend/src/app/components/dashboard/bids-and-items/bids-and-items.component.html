<div class="content">
    <app-header [pageTitle]="'bidsAndItem.my_products' | translate" [showBackBtn]="false"></app-header>
    <div class="section-tabs" *ngIf="showPage">
        <div class="tabs">
            <mat-button-toggle-group  style="width: 95%;" name="bidsAndWish" [(ngModel)]="currentTab" aria-label="Font Style">
                <mat-button-toggle style="width: 35%;"  (click)="selectTab('wishlist')" value="wishlist">{{'bidsAndItem.wishlist' | translate}}</mat-button-toggle>
                <mat-button-toggle *ngIf="!is_BiddingDisabled" style="width: 30%;" (click)="selectTab('bid-sell')" value="bid-sell">{{'bidsAndItem.bidSell' | translate}}</mat-button-toggle>
                <mat-button-toggle  [ngClass]="{'toggleBtnSpaceEn': is_BiddingDisabled, 'toggleBtnSpace': !is_BiddingDisabled}"  (click)="selectTab('bought-sold')" value="bought-sold">{{'bidsAndItem.sells' | translate}}</mat-button-toggle>
              </mat-button-toggle-group>
            <div id="tabs-content" [ngSwitch]="currentTab">
                <div id="tab1" *ngSwitchCase="'wishlist'" class="tab-content">
                    
                    <div class="tab-wish-list" *ngFor="let product of wishlist">
                     <app-all-products-page [product]="product" (favoriteEmitter)="favorite($event)" (nagvigate)="navigateTo($event, product)"> </app-all-products-page>
                    </div>

                    <div class="fix-button-new" *ngIf="!wishlist?.length" class="error_message">
                        <button type="button" (click)="goToWish()" class="submit" class="send_button btn button">
                            {{'bidsAndItem.startShopping' | translate}}</button>

                    </div>
                </div> <!-- END tab1-content -->
                <div id="tab2" *ngSwitchCase="'bid-sell'" class="tab-content">
                    <div class="section_sell">
                        <div class="sells">

                            <div id="sells-content">
                                <div id="sell1" class="sell-content">
                                    <div class="tab-wish-list" [ngStyle]="{borderRightColor: biddingProduct?.bid_text?.includes('هي الأعلى')? '#31CDCD' : '', borderLeftColor: biddingProduct?.bid_text?.includes('is the highest')? '#31CDCD' : ''}" [class]="biddingProduct?.class" *ngFor="let biddingProduct of biddingProducts" [ngClass]="{
                                        accepted : biddingProduct?.bid_status === 'accepted',
                                        rejected : biddingProduct?.bid_status === 'rejected',
                                        open : biddingProduct?.bid_status === 'active' || biddingProduct?.bid_status === 'pending'}"
                                        >
                                        <div class="container">
                                            <div class="payment-box">
                                                <div class="products-thumbnail"
                                                    (click)="biddingProduct?.bid_status === 'accepted' ? '' : navigateTo('/product-detail', biddingProduct)">
                                                    <a>
                                                        <img class="thumbnail"
                                                            [src]="(biddingProduct?.product_images[0]) | image" alt="product" loading="lazy">
                                                    </a>
                                                </div>
                                                <div class="products-content">
                                                    <div class="product-info">
                                                        <div class="left"
                                                            (click)="biddingProduct?.bid_status === 'accepted' ? '' : navigateTo('/product-detail', biddingProduct)">
                                                            <a>
                                                                <h4 class="product-title">
                                                                    {{biddingProduct?.model_id?.model_name}}
                                                                </h4>
                                                                <span class="product-available">
                                                                    <!-- {{biddingProduct?.varient}} -->
                                                                </span>
                                                            </a>
                                                        </div>
                                                        <div class="right">
                                                            <span class="plus-text">
                                                              
                                                                <strong style="font-size: 12px;width:auto" [ngStyle]="{color: (biddingProduct?.bid_text?.includes('هي الأعلى')||biddingProduct?.bid_text?.includes('is the highest'))? '#31CDCD' : ''}" class="text_status"
                                                                    [ngClass]="{
                                                                    accepted : biddingProduct?.bid_status === 'accepted',
                                                                    rejected : biddingProduct?.bid_status === 'rejected',
                                                                    open : biddingProduct?.bid_status === 'active' || biddingProduct?.bid_status === 'pending'
                                                                    }">
                                                                    {{biddingProduct?.bid_text}}
                                                                </strong>

                                                                <strong style="width:auto" class="default"
                                                                    *ngIf="biddingProduct?.bid_status === 'rejected'">
                                                                    {{ ('bidsAndItem.maxBidLable' | translate)}} :
                                                                    {{biddingProduct?.current_bid_price}}</strong>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="products-bottom">
                                                <div class="left">
                                                    <!-- Buy product when bid accepted -->
                                                    <div class="price-buttons price_paynow favouriteBTN"
                                                        *ngIf="biddingProduct?.bid_status === 'accepted'">
                                                        <a class="button bg-color-primary"
                                                            (click)="openBuyModalWhenBidAccepted(biddingProduct)">
                                                            <span class="now-text">
                                                                {{userDetail?.userId == biddingProduct?.seller_id ?
                                                                ("labels.buy_price" | translate)
                                                                : ('labels.paynow' | translate)}}
                                                            </span>
                                                            
                                                        </a>


                                                    </div>

                                                    <div class="price-buttons price_paynow favouriteBTN"
                                                        *ngIf="biddingProduct?.bid_status === 'rejected'">
                                                        <a class="button bg-color-primary"
                                                            (click)="navigateTo('/product-detail', biddingProduct)">
                                                            <span class="now-text">
                                                                {{'labels.PlaceNewBid' | translate}}
                                                            </span>
                                                          
                                                        </a>
                                                    </div>
                                                
                                                </div>
                                                <div class="right">
                                                    <a class="remove"
                                                        *ngIf="biddingProduct?.bidding && biddingProduct?.bidding[0]?.bid_status === 'open' || biddingProduct?.bidding[0]?.bid_status === 'rejected' || biddingProduct?.bid_text?.includes('لم تعد الأعلى') || biddingProduct?.bid_text?.includes('no longer highest') || biddingProduct?.bidding[0]?.bid_status === 'open' || biddingProduct?.bidding[0]?.bid_status === 'active'"
                                                        (click)="removeBidPopup(biddingProduct)">
                                                        <img style="width: '50px'" alt="" [src]="'trash.png' | imagePath" loading="lazy">
                                                        <strong>{{'bidsAndItem.deleteBid' | translate}}</strong>
                                                    </a>

                                                    <div *ngIf="biddingProduct.bid_status === 'accepted'"
                                                        class="removeBid">
                                                       <a class="remove"
                                                       (click)="removeAcceptedBid(biddingProduct, 'remove')">
                                                            <img style="width: '50px'" alt="" [src]="'trash.png' | imagePath" loading="lazy">
                                                            <strong>{{'bidsAndItem.deleteBid' | translate}}</strong>
                                                    </a>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="fix-button-new" *ngIf="!biddingProducts?.length" class="error_message">
                                        <button type="button" (click)="goToBid()" class="submit"
                                            class="send_button btn button">
                                            {{'bidsAndItem.startBidding' | translate}}</button>

                                    </div>
                                </div>

                            </div> <!-- END tabs-content -->
                        </div>
                    </div>
                </div><!-- END tab2-content -->
                <div id="tab3" *ngSwitchCase="'bought-sold'" class="tab-content">
                    <div class="tab-bar">
                        <ul id="tabs-nav">
                            <li [ngClass]="{'active': currentTab2 === 'allProducts'}"><a
                                    (click)="selectTabSecond('allProducts')">{{'labels.allProducts' | translate}}</a></li>
                            <li *ngIf="!is_BiddingDisabled" [ngClass]="{'active': currentTab2 === 'activeBids'}"><a
                                    (click)="selectTabSecond('activeBids')">{{'labels.activeBids' | translate}}</a></li>
                            <li [ngClass]="{'active': currentTab2 === 'productExpired'}"><a
                                    (click)="selectTabSecond('productExpired')">{{'labels.productExpired' | translate}}</a></li>
                        </ul> <!-- END tabs-nav -->
                    </div>

                    <div id="tabs-content" [ngSwitch]="currentTab2">
                        <div id="tab4" *ngSwitchCase="'allProducts'" class="tab-content">
                            <div id="sell2" class="sell-content">
 
                                <div  *ngIf="sellProducts.length === 0" style="padding: 25px;" >
        
        <img [src]="'itemsLeft.svg' | imagePath" alt="Sort" class="sort_img margin">
        <div class="noItems">{{'labels.noItems' | translate }}</div>
        <div class="middleText margin">{{'labels.addProductsMore' | translate }}</div>
        <br>
        <div class="products-bottoms">

            <a class="button btn-full btn " style="width: calc(100% - 0px) " (click)="navigateToDisclamer()">
                <span class="now-text-row">

                    {{'labels.SellYourItemNow' | translate}}
                </span>
            </a>


        </div>
                </div>
                                <div class="tab-wish-list"  infinite-scroll 
                                (scrolled)="onScrollDown($event , 'AllItems')" *ngFor="let sellProduct of sellProducts"
                                    [ngClass]="{'borderRight': sellProduct?.bidding?.length}">
                                    <!-- Start Product Status -->
                                    <div *ngIf="sellProduct?.productCurrentStatus === 'Approved'" class="approvedPendingListing">
                                        <span class="approvedPendingListingTitle approvedListingTitle">{{'labels.approvedListingProduct' | translate}}</span>
                                        <img class="approvedPendingListingImage" [src]="'approved.png' | imagePath" />
                                    </div>
                                    <div *ngIf="sellProduct?.productCurrentStatus === 'Pending'" class="approvedPendingListing pendingListing">
                                        <img class="approvedPendingListingImage" [src]="'pendingListingStatus.png' | imagePath" />
                                        <span class="approvedPendingListingTitle pendingListingTitle">{{'labels.pendingListingProduct' | translate}}</span>
                                    </div>
                                <!-- End Product Status -->
                                    <div class="container">
                                        <div class="payment-box payment-update">
                                            <div class="products-thumbnail"
                                                (click)="navigateTo('/product-detail', sellProduct)">
                                                <a>
                                                    <img class="thumbnail" [src]="(sellProduct?.product_images[0])"
                                                        alt="product" loading="lazy">
                                                </a>
                                            </div>
                                            <div class="products-content">
                                                <div class="product-info">
                                                    <div class="left" (click)="navigateTo('/product-detail', sellProduct)">
                                                        <a>
                                                            <h4 class="product-title">
                                                                {{sellProduct?.model_id?.model_name}}
                                                            </h4>
                                                            <span class="product-available">
                                                                <!-- {{sellProduct?.varient}} -->
                                                            </span>
                                                            <span class="product-available" style="color: '#5ea3ec';">
                                                                {{sellProduct?.sell_price}} {{'labels.sar' | translate}}
                                                            </span>
                                                        </a>
                                                    </div>
        
                                                    <div class="right" style="display: grid;">
                                                        <span class="bidValue" *ngIf="sellProduct?.bidding?.length>0 && !is_BiddingDisabled"
                                                            style="color: '#5ea3ec';">
                                                            {{'labels.maxBidValue' | translate}} :
                                                            <span
                                                                class="totalBidPrice">{{sellProduct?.current_bid_price}}</span>{{'labels.sar'
                                                            | translate}}
                                                        </span>
        
                                                        <span class="bidValue secondBidValue"
                                                            *ngIf="sellProduct?.bidding?.length===0 && !is_BiddingDisabled" style="color: '#5ea3ec';">
                                                            {{'labels.maxBidValueNoBid' | translate}} : <br />
                                                            <span
                                                                class="totalBidPrice">{{sellProduct?.current_bid_price}}</span>{{'labels.sar'
                                                            | translate}}
                                                        </span>
        
                                                        <span class="plus-text btn_2">
                                                            <div class="acceptBid_btn"
                                                                *ngIf="sellProduct?.bidding && (sellProduct?.bidding[0]?.bid_status === 'active') && !is_BiddingDisabled">
                                                              
                                                                <button class="accept-bid-btn"
                                                                    [disabled]="sellProduct?.bidding && (sellProduct?.bidding[0]?.bid_status === 'accepted' || sellProduct?.bidding[0]?.bid_status === 'rejected')"
                                                                    (click)="sellerChangeBidStatus(sellProduct._id , sellProduct, 'accept')">
                                                                        <span *ngIf="sellProduct.expired" class="allbid_btn">{{'labels.acceptBid' | translate}}<br></span>
                                                                       <span *ngIf="!sellProduct.expired" class="allbid_btn" data-toggle="modal" data-target="#exampleModal">{{'labels.acceptBid' | translate}}<br></span>
                                                                </button>
                                                               
        
                                                                <button class="reject-bid-btn"
                                                                    [disabled]="sellProduct?.bidding && (sellProduct?.bidding[0]?.bid_status === 'accepted' || sellProduct?.bidding[0]?.bid_status === 'rejected')"
                                                                    (click)="sellerChangeBidStatus(sellProduct._id , sellProduct, 'reject')">
                                                                        <span *ngIf="sellProduct.expired" class="reject_btn">{{'labels.rejectBid' | translate}}<br></span>
                                                                        <span *ngIf="!sellProduct.expired" class="reject_btn"  data-toggle="modal" data-target="#exampleModal">{{'labels.rejectBid' | translate}}<br></span>
                                                                </button>
                                                            </div>
        
                                                         
        
                                                            <p class="bidStatusReject"
                                                                *ngIf="sellProduct?.bidding && sellProduct?.bidding[0]?.bid_status === 'rejected' && !is_BiddingDisabled">
                                                                {{"labels.rejectedBid" | translate}}
                                                            </p>
        
                                                            <p class="bidStatusAccept"
                                                                *ngIf="sellProduct?.bidding && sellProduct?.bidding[0]?.bid_status === 'accepted'">
                                                                {{"labels.acceptedBid" | translate}}
                                                            </p>
        
                                                            <p class="completePayment"
                                                                *ngIf="sellProduct?.bidding && sellProduct?.bidding[0]?.bid_status === 'accepted'">
                                                                {{'labels.completePayment' | translate}}
                                                            </p>
        
                                                        </span>
                                                    </div>
                                                </div>
                                                <div>
                                                    <p class="separator-icons">
                                                    </p>
                                                    <div class="action-bar" *ngIf="product?.seller_id == loggedUserId && sellProduct?.sell_status !== 'Draft'">
                                                        <div class="icon-left">
                                                            <a>
                                                                <i aria-hidden="true" class="fa fa-calendar renew"
                                                                    (click)="openDialog(sellProduct?._id, sellProduct?.expired)"></i>
                                                                <p style="color: #F35252;" class="pExpiredAvailable"
                                                                    *ngIf="sellProduct?.expired">
                                                                    {{"bidsAndItem.productExpired" | translate}}
                                                                </p>
                                                                <p style="color: #177AE6;" class="pExpiredAvailable"
                                                                    *ngIf="!sellProduct?.expired">
                                                                    {{"bidsAndItem.productAvailable" | translate}}
                                                                </p>
                                                                <strong *ngIf="!sellProduct?.expired"
                                                                    class="RenewNotify">{{'labels.listingExpiresin'
                                                                    | translate}}
                                                                    {{sellProduct?.dateOfExpiry | date: 'dd/MM'}}
                                                                </strong>
                                                            </a>
                                                            <strong class="RenewText" *ngIf="sellProduct?.expired">
                                                                {{'bidsAndItem.RenewNow' | translate}}
                                                            </strong>
                                                        </div>
                                                        <div class="icon-right" >
                                                            <a>
                                                                <i aria-hidden="true" class="fa fa-trash remove"
                                                                    (click)="deleteProduct(sellProduct?._id)"></i>
                                                                <br />
                                                            </a>
                                                            <p class="deletetheproduct">{{"bidsAndItem.deletetheproduct" |
                                                                translate}}</p>
                                                        </div>
                                                    </div>
                                                    <div class="action-bar" *ngIf="product?.seller_id == loggedUserId && sellProduct?.sell_status === 'Draft'">
                                                        <div class="icon-left">
                                                            <a>
                                                                <i aria-hidden="true" class="fa fa-pencil-square-o renew"
                                                                    (click)="navigateTo(sellProduct.save_as_draft_step, sellProduct)"></i>
                                                                <br />
                                                            </a>
                                                            <p style="color: #177AE6;" class="pExpiredAvailable">
                                                                {{"bidsAndItem.continueListing" | translate}}
                                                            </p>
                                                        </div>
                                                        <div class="icon-right" >
                                                            <a>
                                                                <i aria-hidden="true" class="fa fa-trash remove"
                                                                    (click)="deleteDraftProduct(sellProduct?._id)"></i>
                                                                <br />
                                                            </a>
                                                            <p class="deletetheproduct">{{"bidsAndItem.deleteDraft" |
                                                                translate}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                        </div><!-- END tab3-content -->
                    </div> 
                </div>
                        </div>
                        <div  id="tab5" *ngSwitchCase="'activeBids'" class="tab-content">
                            <div *ngIf="!is_BiddingDisabled" class="section_sell">
                                <div class="sells">
        
                                    <div id="sells-content">
                                        <div id="sell1" class="sell-content"  
                                    >
                                        <div class="tab-wish-list"  
                                         *ngFor="let sellProduct of myActiveBidsList"
                                            [ngClass]="{'borderRight': sellProduct?.bidding?.length}">
                                            <div class="container">
                
                                                <div class="payment-box payment-update">
                                                    <div class="products-thumbnail"
                                                        (click)="navigateTo('/product-detail', sellProduct)">
                                                        <a>
                                                            <img class="thumbnail" [src]="(sellProduct?.product_images[0])"
                                                                alt="product" loading="lazy">
                                                        </a>
                                                    </div>
                                                    <div class="products-content">
                                                        <div class="product-info">
                                                            <div class="left" (click)="navigateTo('/product-detail', sellProduct)">
                                                                <a>
                                                                    <h4 class="product-title">
                                                                        {{language === "en" ? sellProduct?.model?.model_name : sellProduct?.model?.model_name_ar}}
                                                                    </h4>
                                                                    <span class="product-available">
                                                                        <!-- {{sellProduct?.varient}} -->
                                                                    </span>
                                                                    <span class="product-available" style="color: '#5ea3ec';">
                                                                        {{sellProduct?.sell_price}} {{'labels.sar' | translate}}
                                                                    </span>
                                                                </a>
                                                            </div>
                
                                                            <div class="right" style="display: grid;">
                                                                <span class="bidValue" *ngIf="sellProduct?.bidding?.length>0"
                                                                    style="color: '#5ea3ec';">
                                                                    {{'labels.maxBidValue' | translate}} :
                                                                    <span
                                                                        class="totalBidPrice">{{sellProduct?.current_bid_price}}</span>{{'labels.sar'
                                                                    | translate}}
                                                                </span>
                
                                                                <span class="bidValue secondBidValue"
                                                                    *ngIf="sellProduct?.bidding?.length===0" style="color: '#5ea3ec';">
                                                                    {{'labels.maxBidValueNoBid' | translate}} : <br />
                                                                    <span
                                                                        class="totalBidPrice">{{sellProduct?.current_bid_price}}</span>{{'labels.sar'
                                                                    | translate}}
                                                                </span>
                
                                                                <span class="plus-text btn_2">
                                                                    <div class="acceptBid_btn"
                                                                        *ngIf="sellProduct?.bidding && (sellProduct?.bidding[0]?.bid_status === 'active')">
                                                                      
                                                                        <button class="accept-bid-btn"
                                                                            [disabled]="sellProduct?.bidding && (sellProduct?.bidding[0]?.bid_status === 'accepted' || sellProduct?.bidding[0]?.bid_status === 'rejected')"
                                                                            (click)="sellerChangeBidStatus(sellProduct._id , sellProduct, 'accept')">
                                                                                <span *ngIf="sellProduct.expired" class="allbid_btn">{{'labels.acceptBid' | translate}}<br></span>
                                                                               <span *ngIf="!sellProduct.expired" class="allbid_btn" data-toggle="modal" data-target="#exampleModal">{{'labels.acceptBid' | translate}}<br></span>
                                                                        </button>
                                                                       
                
                                                                        <button class="reject-bid-btn"
                                                                            [disabled]="sellProduct?.bidding && (sellProduct?.bidding[0]?.bid_status === 'accepted' || sellProduct?.bidding[0]?.bid_status === 'rejected')"
                                                                            (click)="sellerChangeBidStatus(sellProduct._id , sellProduct, 'reject')">
                                                                                <span *ngIf="sellProduct.expired" class="reject_btn">{{'labels.rejectBid' | translate}}<br></span>
                                                                                <span *ngIf="!sellProduct.expired" class="reject_btn"  data-toggle="modal" data-target="#exampleModal">{{'labels.rejectBid' | translate}}<br></span>
                                                                        </button>
                                                                    </div>
                
                                                                 
                
                                                                    <p class="bidStatusReject"
                                                                        *ngIf="sellProduct?.bidding[0]?.bid_status === 'rejected'">
                                                                        {{"labels.rejectedBid" | translate}}
                                                                    </p>
                
                                                                    <p class="bidStatusAccept"
                                                                        *ngIf="sellProduct?.bidding[0]?.bid_status === 'accepted'">
                                                                        {{"labels.acceptedBid" | translate}}
                                                                    </p>
                
                                                                    <p class="completePayment"
                                                                        *ngIf="sellProduct?.bidding[0]?.bid_status === 'accepted'">
                                                                        {{'labels.completePayment' | translate}}
                                                                    </p>
                
                                                                </span>
                                                            </div>
                                                        </div>
                                                        <div>
                                                            <p class="separator-icons">
                                                            </p>
                                                            <div class="action-bar" *ngIf="product?.seller_id == loggedUserId && sellProduct?.sell_status !== 'Draft'">
                                                                <div class="icon-left">
                                                                    <a>
                                                                        <i aria-hidden="true" class="fa fa-calendar renew"
                                                                            (click)="openDialog(sellProduct?._id, sellProduct?.expired)"></i>
                                                                        <p style="color: #F35252;" class="pExpiredAvailable"
                                                                            *ngIf="sellProduct?.expired">
                                                                            {{"bidsAndItem.productExpired" | translate}}
                                                                        </p>
                                                                        <p style="color: #177AE6;" class="pExpiredAvailable"
                                                                            *ngIf="!sellProduct?.expired">
                                                                            {{"bidsAndItem.productAvailable" | translate}}
                                                                        </p>
                                                                        <strong *ngIf="!sellProduct?.expired"
                                                                            class="RenewNotify">{{'labels.listingExpiresin'
                                                                            | translate}}
                                                                            {{sellProduct?.dateOfExpiry | date: 'dd/MM'}}
                                                                        </strong>
                                                                    </a>
                                                                    <strong class="RenewText" *ngIf="sellProduct?.expired">
                                                                        {{'bidsAndItem.RenewNow' | translate}}
                                                                    </strong>
                                                                </div>
                                                                <div class="icon-right" >
                                                                    <a>
                                                                        <i aria-hidden="true" class="fa fa-trash remove"
                                                                            (click)="deleteProduct(sellProduct?._id)"></i>
                                                                        <br />
                                                                    </a>
                                                                    <p class="deletetheproduct">{{"bidsAndItem.deletetheproduct" |
                                                                        translate}}</p>
                                                                </div>
                                                            </div>
                                                            <div class="action-bar" *ngIf="product?.seller_id == loggedUserId && sellProduct?.sell_status === 'Draft'">
                                                                <div class="icon-left">
                                                                    <a>
                                                                        <i aria-hidden="true" class="fa fa-pencil-square-o renew"
                                                                            (click)="navigateTo(sellProduct.save_as_draft_step, sellProduct)"></i>
                                                                        <br />
                                                                    </a>
                                                                    <p style="color: #177AE6;" class="pExpiredAvailable">
                                                                        {{"bidsAndItem.continueListing" | translate}}
                                                                    </p>
                                                                </div>
                                                                <div class="icon-right" >
                                                                    <a>
                                                                        <i aria-hidden="true" class="fa fa-trash remove"
                                                                            (click)="deleteDraftProduct(sellProduct?._id)"></i>
                                                                        <br />
                                                                    </a>
                                                                    <p class="deletetheproduct">{{"bidsAndItem.deleteDraft" |
                                                                        translate}}</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <br>
                                </div><!-- END tab3-content -->
                            </div> 
                                            <!-- <div class="fix-button-new" *ngIf="!biddingProducts?.length" class="error_message">
                                                <button type="button" (click)="goToBid()" class="submit"
                                                    class="send_button btn button">
                                                    {{'bidsAndItem.startBidding' | translate}}</button>
        
                                            </div> -->
                                        </div>
        
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="tab6" *ngSwitchCase="'productExpired'" class="tab-content">
                            <div id="sell2" class="sell-content">
                       
                                <div  *ngIf="myExpiredItemsList.length === 0" style="padding: 25px;" >
        
                                    <img [src]="'itemsLeft.svg' | imagePath" alt="Sort" class="sort_img margin">
                                    <div class="noItems">{{'labels.noItems' | translate }}</div>
                                    <div class="middleText margin">{{'labels.addProductsMore' | translate }}</div>
                                    <br>
                                    <div class="products-bottoms">
                            
                                        <a class="button btn-full btn " style="  width: calc(100% - 0px) " (click)="navigateToDisclamer()">
                                            <span class="now-text-row">
                            
                                                {{'labels.SellYourItemNow' | translate}}
                                            </span>
                                        </a>
                            
                            
                                    </div>
                                            </div>
                                <div class="tab-wish-list "  infinite-scroll 
                                (scrolled)="onScrollDown($event , 'expired')"  *ngFor="let sellProduct of myExpiredItemsList"
                                    [ngClass]="{'borderRight': sellProduct?.bidding?.length}">
                                    <div class="container">
        
                                        <div class="payment-box payment-update">
                                            <div class="products-thumbnail"
                                                (click)="navigateTo('/product-detail', sellProduct)">
                                                <a>
                                                    <img class="thumbnail" [src]="(sellProduct?.product_images[0])"
                                                        alt="product" loading="lazy">
                                                </a>
                                            </div>
                                            <div class="products-content">
                                                <div class="product-info">
                                                    <div class="left" (click)="navigateTo('/product-detail', sellProduct)">
                                                        <a>
                                                            <h4 class="product-title">
                                                                {{sellProduct?.model_id?.model_name}}
                                                            </h4>
                                                            <span class="product-available">
                                                                <!-- {{sellProduct?.varient}} -->
                                                            </span>
                                                            <span class="product-available" style="color: '#5ea3ec';">
                                                                {{sellProduct?.sell_price}} {{'labels.sar' | translate}}
                                                            </span>
                                                        </a>
                                                    </div>
        
                                                    <div class="right" style="display: grid;">
                                                        <span class="bidValue" *ngIf="sellProduct?.bidding?.length>0 && !is_BiddingDisabled"
                                                            style="color: '#5ea3ec';">
                                                            {{'labels.maxBidValue' | translate}} :
                                                            <span
                                                                class="totalBidPrice">{{sellProduct?.current_bid_price}}</span>{{'labels.sar'
                                                            | translate}}
                                                        </span>
        
                                                        <span class="bidValue secondBidValue"
                                                            *ngIf="sellProduct?.bidding?.length===0 && !is_BiddingDisabled" style="color: '#5ea3ec';">
                                                            {{'labels.maxBidValueNoBid' | translate}} : <br />
                                                            <span
                                                                class="totalBidPrice">{{sellProduct?.current_bid_price}}</span>{{'labels.sar'
                                                            | translate}}
                                                        </span>
        
                                                        <span class="plus-text btn_2">
                                                            <div class="acceptBid_btn"
                                                                *ngIf="sellProduct?.bidding && (sellProduct?.bidding[0]?.bid_status === 'active') && !is_BiddingDisabled">
                                                              
                                                                <button class="accept-bid-btn"
                                                                    [disabled]="sellProduct?.bidding && (sellProduct?.bidding[0]?.bid_status === 'accepted' || sellProduct?.bidding[0]?.bid_status === 'rejected')"
                                                                    (click)="sellerChangeBidStatus(sellProduct._id , sellProduct, 'accept')">
                                                                        <span *ngIf="sellProduct.expired" class="allbid_btn">{{'labels.acceptBid' | translate}}<br></span>
                                                                       <span *ngIf="!sellProduct.expired" class="allbid_btn" data-toggle="modal" data-target="#exampleModal">{{'labels.acceptBid' | translate}}<br></span>
                                                                </button>
                                                               
        
                                                                <button class="reject-bid-btn"
                                                                    [disabled]="sellProduct?.bidding && (sellProduct?.bidding[0]?.bid_status === 'accepted' || sellProduct?.bidding[0]?.bid_status === 'rejected')"
                                                                    (click)="sellerChangeBidStatus(sellProduct._id , sellProduct, 'reject')">
                                                                        <span *ngIf="sellProduct.expired" class="reject_btn">{{'labels.rejectBid' | translate}}<br></span>
                                                                        <span *ngIf="!sellProduct.expired" class="reject_btn"  data-toggle="modal" data-target="#exampleModal">{{'labels.rejectBid' | translate}}<br></span>
                                                                </button>
                                                            </div>
        
                                                         
        
                                                            <p class="bidStatusReject"
                                                                *ngIf="sellProduct?.bidding && sellProduct?.bidding[0]?.bid_status === 'rejected' && !is_BiddingDisabled">
                                                                {{"labels.rejectedBid" | translate}}
                                                            </p>
        
                                                            <p class="bidStatusAccept"
                                                                *ngIf="sellProduct?.bidding && sellProduct?.bidding[0]?.bid_status === 'accepted'">
                                                                {{"labels.acceptedBid" | translate}}
                                                            </p>
        
                                                            <p class="completePayment"
                                                                *ngIf="sellProduct?.bidding && sellProduct?.bidding[0]?.bid_status === 'accepted'">
                                                                {{'labels.completePayment' | translate}}
                                                            </p>
        
                                                        </span>
                                                    </div>
                                                </div>
                                                <div>
                                                    <p class="separator-icons">
                                                    </p>
                                                    <div class="action-bar" *ngIf="product?.seller_id == loggedUserId && sellProduct?.sell_status !== 'Draft'">
                                                        <div class="icon-left">
                                                            <a>
                                                                <i aria-hidden="true" class="fa fa-calendar renew"
                                                                    (click)="openDialog(sellProduct?._id, sellProduct?.expired)"></i>
                                                                <p style="color: #F35252;" class="pExpiredAvailable"
                                                                    *ngIf="sellProduct?.expired">
                                                                    {{"bidsAndItem.productExpired" | translate}}
                                                                </p>
                                                                <p style="color: #177AE6;" class="pExpiredAvailable"
                                                                    *ngIf="!sellProduct?.expired">
                                                                    {{"bidsAndItem.productAvailable" | translate}}
                                                                </p>
                                                                <strong *ngIf="!sellProduct?.expired"
                                                                    class="RenewNotify">{{'labels.listingExpiresin'
                                                                    | translate}}
                                                                    {{sellProduct?.dateOfExpiry | date: 'dd/MM'}}
                                                                </strong>
                                                            </a>
                                                            <strong class="RenewText" *ngIf="sellProduct?.expired">
                                                                {{'bidsAndItem.RenewNow' | translate}}
                                                            </strong>
                                                        </div>
                                                        <div class="icon-right" >
                                                            <a>
                                                                <i aria-hidden="true" class="fa fa-trash remove"
                                                                    (click)="deleteProduct(sellProduct?._id)"></i>
                                                                <br />
                                                            </a>
                                                            <p class="deletetheproduct">{{"bidsAndItem.deletetheproduct" |
                                                                translate}}</p>
                                                        </div>
                                                    </div>
                                                    <div class="action-bar" *ngIf="product?.seller_id == loggedUserId && sellProduct?.sell_status === 'Draft'">
                                                        <div class="icon-left">
                                                            <a>
                                                                <i aria-hidden="true" class="fa fa-pencil-square-o renew"
                                                                    (click)="navigateTo(sellProduct.save_as_draft_step, sellProduct)"></i>
                                                                <br />
                                                            </a>
                                                            <p style="color: #177AE6;" class="pExpiredAvailable">
                                                                {{"bidsAndItem.continueListing" | translate}}
                                                            </p>
                                                        </div>
                                                        <div class="icon-right" >
                                                            <a>
                                                                <i aria-hidden="true" class="fa fa-trash remove"
                                                                    (click)="deleteDraftProduct(sellProduct?._id)"></i>
                                                                <br />
                                                            </a>
                                                            <p class="deletetheproduct">{{"bidsAndItem.deleteDraft" |
                                                                translate}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br>
                        </div><!-- END tab3-content -->
                    </div> <!-- END tabs-content -->
                </div>
                        </div>
                        
                        </div>
      

    </div>
</div>
        </div>
        </div>
<!--content-->

<div id="allbid-popup" class="popup" [style.display]="showBids ? 'block' : 'none'">
    <div class="popup-inner">
        <h4 class="bid-title">{{'labels.highestBid' | translate}}</h4>
        <div class="all-bid-list">
            <table class="table mb-0" aria-describedby="Table talk about displaying bids">
                <thead class="thead-light">
                    <tr>
                        <th id="bidPriceScope">{{'labels.bidPrice' | translate}}</th>
                        <th id="paymentBlockedScope" style="width: 110px;">{{'labels.paymentBlocked' | translate}}</th>
                        <th id="acceptBidScope">{{'labels.acceptBid' | translate}}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="ng-star-inserted" *ngFor="let bid of bids">
                        
                        <td title="Bid Price">{{bid?.bid_price}}</td>
                        <td title="Payment Blocked"> {{bid?.pay_bid_amount}}
                     
                        </td>
                        <td title="Accept Bid">
                            <button type="button" [disabled]="bid?.bid_status === 'accepted'"
                                (click)="acceptBid(bidProductId ,bid?.bid_id)" name="submit"
                                class="accept_bid_button">{{bid?.bid_status === 'accepted' ? ("labels.accepted" |
                                translate) : ("labels.accept" | translate)}}</button>
                        </td>
                    </tr>
                    <tr *ngFor="let bid of bids">
                        <td colspan="3">
                            <p>{{'bidsAndItem.bidEndDateMsg' | translate:bid}}</p>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Add Descriptopn For Seller Product Price -->
            <div class="cart-totals">
                <table aria-describedby="Add Descriptopn For Seller Product Price">
                    <tbody *ngFor="let bid of bids">
                        <tr style="display: none;">
                            <th id="Bids">Bids Details</th>
                        </tr>
                        <tr>
                            <td class="shipping-charges">{{'sellFlow.shippingCharges' | translate}}</td>
                            <td *ngIf="bid.shipping_charge !== 0">{{bid.shipping_charge}} {{'labels.sar' | translate}}
                            </td>

                            <td *ngIf="bid.shipping_charge===0" class="freeCharge">
                                {{ "sellFlow.free" | translate}}
                            </td>

                        </tr>
                        <tr>
                            <td class="commission">{{'sellFlow.commission' | translate}}</td>
                            <td>
                                <span class="discount" *ngIf="bid.promoCode">
                                    <img class="img_discount" alt="" [src]="'discount.svg' | imagePath:'icons'" />
                                    {{bid.promoCode}} {{'labels.sar' | translate}}
                                </span>
                                {{bid.commission}} {{'labels.sar' | translate}}
                            </td>
                        </tr>

                   
                        <tr>
                            <td class="vat">{{'sellFlow.vat' | translate}}</td>
                            <td>{{bid.vatWithPromo? bid.vatWithPromo : bid.vat}} {{'labels.sar' | translate}}</td>
                        </tr>

                        <tr *ngIf="bid.promoCode">
                            <td class="grand-total">{{'labels.Net_amount_for_Seller' | translate}}</td>
                            <td class="f-price font-color-primary"> {{bid.bid_price -
                                (bid.commissionWithPromo + bid.vatWithPromo)}}<sub>{{'labels.sar' |
                                    translate}}</sub></td>
                        </tr>

                        <tr *ngIf="!bid.promoCode">
                            <td class="grand-total">{{'labels.Net_amount_for_Seller' | translate}}</td>
                            <td class="f-price font-color-primary"> {{bid.bid_price -
                                (bid.commission + bid.vat)}}<sub>{{'labels.sar' |
                                    translate}}</sub></td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
        <a (click)="showAllBid([], '')" class="popup-close">
            <img [src]="'close-icon-popup.svg' | imagePath:'icons'" alt="" class="icon-close">
        </a>

    </div>
</div>

<bid-modal (refresh)="refreshList()"></bid-modal>
<buy-modal></buy-modal>

<!-- Modal to show  bid details for seller-->
<div *ngIf="selectedSellProduct" class="modal" id="exampleModal" tabindex="-1" role="dialog"
    aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modalInfoBid" role="document">
        <div class="modal-content">
            <div class="row">
                <div class="col-12">
                    <div class="modal-body">
                        <h5 class="expireDate"> {{'labels.bidValidTill' | translate}} {{selectedSellProduct?.expiryDate
                            | date:'d/M/yy'}}</h5>

                        <div class="cart-totals">

                            <table aria-describedby="Modal to show  bid details for seller">
                                <tbody>
                                    <tr style="display: none;">
                                        <th id="Bids">Bid Details for accept or Reject</th>
                                    </tr>
                                    <tr>
                                        <td class="shipping-charges">
                                            {{ "labels.bidPrice" | translate }}
                                        </td>
                                        <td>{{ selectedSellProduct?.bidding[0]?.bid_price }} {{ "labels.sar" | translate
                                            }}</td>
                                    </tr>
                                    <tr>
                                        <td class="shipping-charges">
                                            {{ "sellFlow.shippingCharges" | translate }}
                                        </td>
                                        <td style="color: 'var(--primary-color) !important';">
                                            {{ selectedSellProduct?.bidding[0]?.shipping_charge === 0 ? ('sellFlow.free'
                                            | translate) : selectedSellProduct?.bidding[0]?.shipping_charge }}
                                            {{ selectedSellProduct?.bidding[0]?.shipping_charge === 0 ? '' : "labels.sar"
                                            | translate }}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="commission">
                                            {{ "sellFlow.commission" | translate }}
                                        </td>
                                        <td>
                                            {{ selectedSellProduct?.bidding[0]?.commission }} {{ "labels.sar" |
                                            translate }}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="vat">{{ "sellFlow.vat" | translate }}</td>
                                        <td>{{ selectedSellProduct?.bidding[0]?.vat }} {{ "labels.sar" | translate }}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="grand-total">
                                            {{ "labels.Net_amount_for_Seller" | translate }}
                                        </td>
                                        <td class="f-price font-color-primary">
                                            {{ calculate_Total_Price_For_Sell_Product() }}<sub>{{ "labels.sar" |
                                                translate }}</sub>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-12 footerModal">
                    <div class="row">
                        <h5 class="lineSpare"></h5>
                        <div class="col-12 acceptRejectTitle">
                            <h2>{{selectedSellProduct?.status === 'reject' ? ('alertPopUpTexts.rejectBid' | translate) :
                                ('alertPopUpTexts.acceptBid' | translate)}}</h2>
                        </div>

                        <div class="col-12 notifiy" *ngIf="selectedSellProduct?.status === 'accept'">
                            {{'alertPopUpTexts.acceptBidtext' | translate}}!
                        </div>
                        <div class="col-12 btn-modals">
                            <button type="button" class="btn-accept" data-dismiss="modal"
                                (click)="acceptedBidFunction()">{{'labels.yes' | translate}}</button>
                            <button type="button" class="btn-cancel" data-dismiss="modal">{{'labels.no' |
                                translate}}</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<app-delete-listing-modal *ngIf="showModal"></app-delete-listing-modal>