<div class="page-content">
    <div class="container-fluid">

        <!-- start page title -->
        <div class="row">
            <div class="col-12">
                <div class="page-title-box d-flex align-items-center justify-content-between">
                    <div class="page-title-right">
                        <a class="back-button" (click)="goBack()">
                            <img src="assets/images/icons/back-icon.svg">
                        </a>
                        <ol class="breadcrumb m-0">
                            <li class="breadcrumb-item active"><a
                                    [routerLink]="['/admin/categories']">{{'categories.categories' |
                                    translate}}</a></li>

                            <li class="breadcrumb-item">
                                {{'categories.conditions' | translate}}
                            </li>
                        </ol>
                    </div>
                    <div class="page-title-right2">
                        <div class="select_box">
                            {{'masterQuestions.selectCategories' | translate}}
                            <select class="ml-2 custom-select custom-select-sm form-control form-control-sm"
                                name="selectcategories" [(ngModel)]="selectedCategory"
                                (change)="changeCategory(selectedCategory)" id="selectcategories">
                                <option *ngFor="let category of categoryList" [value]="category?._id">
                                    {{category?.category_name}}
                                </option>
                            </select>
                        </div>
                        <!-- <button type="button" class="btn btn-rounded btn-warning btn-w waves-effect waves-light"
                data-toggle="modal" data-target=".changeOrder_detail">
                {{'labels.changeOrder' | translate}}</button> -->
                        <button type="button" class="btn btn-rounded btn-warning btn-w waves-effect waves-light"
                            data-toggle="modal" data-target="#add-condition">Add Condition</button>


                        <div class="modal fade add_detail" id="add-condition" tabindex="-1" role="dialog"
                            aria-labelledby="mySmallModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title mt-0">{{'categories.addCondition' | translate}}</h5>
                                        <button type="button" class="close" (click)="closeModal('add-condition')">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <form [formGroup]="addConditionForm">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-group">
                                                        <label class="control-label">Condition Title (Used in label)
                                                        </label>
                                                        <input type="text" formControlName="condition"
                                                            placeholder="Enter English" class="form-control"
                                                            name="course-name">
                                                    </div>
                                                    <div class="form-group">
                                                        <input type="text" formControlName="condition_ar"
                                                            placeholder="Enter Arabic" class="form-control"
                                                            name="course-name">
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Label Color</label>
                                                        <!-- <input type="text" formControlName="label"
                                                            placeholder="Enter Arabic" class="form-control"
                                                            name="course-name"> -->
                                                        <div class="container">
                                                            <div class="row">
                                                                <div *ngFor="let color of colors" class="mr-md-2">
                                                                    <input formControlName="label" [style.background]="color.labelColor" class="condition-color-input" type="radio" name="color" [value]="color.labelColor">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <label class="control-label">SPP Condition banner</label>

                                                    <div class="form-group">
                                                        <label class="control-label">Upload SPP Condition banner ( EN
                                                            )</label>
                                                        <div class="custom_file">
                                                            <input type="file"
                                                                accept="image/png,image/x-png,image/gif,image/jpeg,image/jpg"
                                                                (change)="selectImage($event.target.files , 'addedImgBannerSPPEN')"
                                                                class="custom_file_input">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Upload SPP Condition banner ( AR
                                                            )</label>
                                                        <div class="custom_file">
                                                            <input type="file"
                                                                accept="image/png,image/x-png,image/gif,image/jpeg,image/jpg"
                                                                (change)="selectImage($event.target.files , 'addedImgBannerSPPAR')"
                                                                class="custom_file_input">
                                                        </div>
                                                    </div>
                                                    <label class="control-label">Listing Confirmation Condition banner
                                                    </label>

                                                    <div class="form-group">
                                                        <label class="control-label">Upload Listing Confirmation
                                                            Condition banner ( EN )</label>
                                                        <div class="custom_file">
                                                            <input type="file"
                                                                accept="image/png,image/x-png,image/gif,image/jpeg,image/jpg"
                                                                (change)="selectImage($event.target.files , 'addedImgBannerMPPEN')"
                                                                class="custom_file_input">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Upload Listing Confirmation
                                                            Condition banner ( AR )</label>
                                                        <div class="custom_file">
                                                            <input type="file"
                                                                accept="image/png,image/x-png,image/gif,image/jpeg,image/jpg"
                                                                (change)="selectImage($event.target.files , 'addedImgBannerMPPAR')"
                                                                class="custom_file_input">
                                                        </div>
                                                    </div>
                                                    <label class="control-label">Condition Score Range </label>

                                                    <div class="form-group">
                                                        <label class="control-label">Minimum</label>
                                                        <input type="number" formControlName="Min"
                                                            placeholder="Enter Minimum" class="form-control"
                                                            name="course-name">
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Maximum</label>
                                                        <input type="number" formControlName="Max"
                                                            placeholder="Enter Maximum" class="form-control"
                                                            name="course-name">
                                                    </div>
                                                    <div class="form-group presistContainer">
                                                        <label for="presist" class="presistTitle">Enable as Preset Condition</label>
                                                        <div class="conatinerCheck" [class.conatinerCheckActive]="isPresetAdd">
                                                          <input class="form-check-input presistInputActive" type="checkbox" formControlName="isPreset">
                                                        </div>
                                                      </div>
                                                </div>
                                            </div>
                                            <button [disabled]="addConditionForm?.invalid" class="btn btn-warning" (click)="addCondition()" type="submit">{{'categories.save' | translate}}</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="modal fade add_detail" id="edit-condition" tabindex="-1" role="dialog"
                            aria-labelledby="mySmallModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title mt-0">{{'categories.updateCondition' | translate}}</h5>
                                        <button type="button" class="close" (click)="closeModal('edit-condition')">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <form [formGroup]="editConditionForm">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-group">
                                                        <label class="control-label">Condition Title (Used in label)
                                                        </label>
                                                        <input type="text" formControlName="condition"
                                                            placeholder="Enter English" class="form-control"
                                                            name="course-name">
                                                    </div>
                                                    <div class="form-group">
                                                        <input type="text" formControlName="condition_ar"
                                                            placeholder="Enter Arabic" class="form-control"
                                                            name="course-name">
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Label Color</label>
                                                        <!-- <input type="text" formControlName="label"
                                                            placeholder="Enter Arabic" class="form-control"
                                                            name="course-name"> -->
                                                        <div class="container">
                                                            <div class="row">
                                                                <div *ngFor="let color of colors" class="mr-md-2">
                                                                    <input formControlName="label" [style.background]="color.labelColor" class="condition-color-input" type="radio" name="color" [value]="color.labelColor">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <label class="control-label">SPP Condition banner</label>

                                                    <div class="form-group">
                                                        <label class="control-label">Upload SPP Condition banner ( EN
                                                            )</label>
                                                        <div class="custom_file">
                                                            <input type="file"
                                                                accept="image/png,image/x-png,image/gif,image/jpeg,image/jpg"
                                                                (change)="selectEditImage($event.target.files , 'addedImgBannerSPPEN')"
                                                                class="custom_file_input">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Upload SPP Condition banner ( AR
                                                            )</label>
                                                        <div class="custom_file">
                                                            <input type="file"
                                                                accept="image/png,image/x-png,image/gif,image/jpeg,image/jpg"
                                                                (change)="selectEditImage($event.target.files , 'addedImgBannerSPPAR')"
                                                                class="custom_file_input">
                                                        </div>
                                                    </div>
                                                    <label class="control-label">Listing Confirmation Condition banner
                                                    </label>

                                                    <div class="form-group">
                                                        <label class="control-label">Upload Listing Confirmation
                                                            Condition banner ( EN )</label>
                                                        <div class="custom_file">
                                                            <input type="file"
                                                                accept="image/png,image/x-png,image/gif,image/jpeg,image/jpg"
                                                                (change)="selectEditImage($event.target.files , 'addedImgBannerMPPEN')"
                                                                class="custom_file_input">
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Upload Listing Confirmation
                                                            Condition banner ( AR )</label>
                                                        <div class="custom_file">
                                                            <input type="file"
                                                                accept="image/png,image/x-png,image/gif,image/jpeg,image/jpg"
                                                                (change)="selectEditImage($event.target.files , 'addedImgBannerMPPAR')"
                                                                class="custom_file_input">
                                                        </div>
                                                    </div>
                                                    <label class="control-label">Condition Score Range </label>

                                                    <div class="form-group">
                                                        <label class="control-label">Minimum</label>
                                                        <input type="number" formControlName="Min"
                                                            placeholder="Enter Minimum" class="form-control"
                                                            name="course-name">
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="control-label">Maximum</label>
                                                        <input type="number" formControlName="Max"
                                                            placeholder="Enter Maximum" class="form-control"
                                                            name="course-name">
                                                    </div>

                                                    <div class="form-group presistContainer">
                                                      <label for="presist" class="presistTitle">Enable as Preset Condition</label>
                                                      <div class="conatinerCheck" [class.conatinerCheckActive]="isPresetEdit">
                                                        <input class="form-check-input presistInputActive" type="checkbox" formControlName="isPreset">
                                                      </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <button
                                                [disabled]="editConditionForm?.invalid"
                                                class="btn btn-warning"
                                                (click)="saveUpdateCondition()"
                                                type="submit">{{'categories.save' | translate}}
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end page title -->


        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-body pt-3">
                        <div class="table-responsive table-style">
                            <table class="table mb-0">
                                <thead class="thead-light">
                                    <tr>
                                        <th style="width: 20px;">No</th>
                                        <th style="width: 120px;">EN Condition Title </th>
                                        <th style="width: 120px;">AR Condition Title </th>

                                        <th style="width: 120px;">EN SPP Banner </th>

                                        <th style="width: 120px;">AR SPP Banner </th>

                                        <th style="width: 120px;">EN Listing Banner </th>
                                        <th style="width: 120px;">AR Listing Banner </th>
                                        <th style="width: 120px;">Score</th>
                                        <th style="width: 120px;">Actions</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let data of conditionsList| paginate: {
                                        id: 'conditionsList',
                                        itemsPerPage: limit,
                                        currentPage: currentPage,
                                        totalItems: totalResult
                                        }; let i = index;">

                                        <td data-title="{{'categories.no' | translate}}">{{(i + 1) + (currentPage - 1) * limit}}</td>

                                        <td class="td1">
                                            {{data.name}} </td>
                                        <td class="td1">
                                            {{data.nameAr}} </td>
                                        <td class="td1"   style="width: 120px;">
                                            <img [src]="getBanner(data?.banners, 'SPP', 'EN').url" alt="" height="30" width="50"
                                            class="img img-circle">
                                        </td>
                                        <td class="td1"   style="width: 120px;">
                                            <img [src]="getBanner(data?.banners, 'SPP', 'AR').url" alt="" height="30" width="50"
                                                class="img img-circle">
                                        </td>
                                        <td class="td1"   style="width: 120px;">
                                            <img [src]="getBanner(data?.banners, 'Listing', 'EN').url" alt="" height="30" width="50"
                                                    class="img img-circle">
                                        </td>
                                        <td class="td1"   style="width: 120px;"  >
                                            <img [src]="getBanner(data?.banners, 'Listing', 'AR').url" alt="" height="30" width="50"
                                                        class="img img-circle">
                                        </td>
                                            <td class="td1">
                                                {{data.scoreRange.min}}  -  {{data.scoreRange.max}} </td>

                                     <td>
                                        <a class="mr-2 text-primary" (click)="updateCondition(data)">
                                            <i class="mdi mdi-pencil font-size-18"></i>
                                        </a>

                                        <a class="text-danger" (click)="action(data?.id)">
                                            <i class="mdi mdi-trash-can font-size-18">
                                        </i>
                                        </a>
                                     </td>

                                    </tr>

                                </tbody>
                            </table>

                            <div class="row" *ngIf="notMatchSearch">
                                <div class="col-12 notMatchSearch">
                                  <h5>No Found Data Match Your Search!</h5>
                                </div>
                              </div>

                            <div class="row">
                                <div class="col-sm-12 col-md-5">
                                    <div class="dataTables_info">
                                        {{'conditions.showMinMaxNumberofList' | translate: entries}} | Total conditions: {{totalResult}}
                                    </div>
                                </div>
                                <div class="col-sm-12 col-md-7">
                                    <div class="dataTables_paginate paging_simple_numbers">
                                        <pagination-controls [nextLabel]="paginationNextLabel"
                                            [previousLabel]="paginationPreviousLabel" id="conditionsList"
                                            (pageChange)="selectPage($event)">
                                        </pagination-controls>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end row -->

    </div> <!-- container-fluid -->
</div>
